function __clickOnEnter(n,t){n.keyCode===13&&$(t).click()}function __formValidateContent(n){for(var h,u,f,c=n.split(","),t=[],o=0;o<c.length;o++){var a=c[o],l=a.split(":"),i=$.trim(l[0]),s=$.trim(l[1]),e=$(i),r=e.val();s==="required"?r.length===0&&__trackInvalidField(t,i):s==="valid"?r.length===0?__trackInvalidField(t,i):(h=e.attr("type"),h!=="email"||__isValidEmail(r)||__trackInvalidField(t,i),h!=="email"||__isValidUrl(r)||__trackInvalidField(t,i)):s==="range"&&(u=parseInt(e.attr("min")),u=isNaN(u)?-1e9:u,f=parseInt(e.attr("max")),f=isNaN(f)?1e9:f,(r>=u&&r<=f?0:1)&&__trackInvalidField(t,i))}return t}function __formSubmitContent(n,t){var i=$(n),c=i.closest("form").attr("id"),s=i.data("ui-validation"),f=s.length>0?__formValidateContent(s):[],h="#"+c,u,r,e,o;for($(h+" input").each(function(){var t=$(this),n;t.removeClass("is-invalid");n=t.data("ui-feedback");n!=null&&$(n).html("").addClass("d-none")}),u=0;u<f.length;u++)r=f[u],typeof r.elementSelector!="undefined"&&typeof r.text!="undefined"&&($(r.elementSelector).removeClass("d-none").html(r.text),$(r.fieldSelector).addClass("is-invalid"));if(e=$(i.data("ui-feedback")),t=typeof t!="undefined"?t:2,o=i.data("ui-css-failure"),f.length>0){e.statusMessage(i.data("ui-error"),!1,"",o).hideAfter(t);return}i.spin();Ybq.postForm(h,function(n){i.unspin();var r=JSON.parse(n);__formFinalizeAction(i,r,t)},function(){i.unspin();e.statusMessage(i.data("ui-general-error"),!1,"",o).hideAfter(t)});return}function __formFinalizeAction(n,t,i){var r=n.data("post-action"),u=n.data("post-action-param"),f=n.data("ui-css-success"),e=n.data("ui-css-failure"),o=n.data("ui-feedback");if(typeof r=="undefined"&&(r="showfeedbackandcontinue"),r==="showfeedbackandcontinue"){$(o).statusMessage(t.message,t.success,f,e).hideAfter(i);return}if(r==="showfeedback"){n.addClass("d-none");$(o).statusMessage(t.message,t.success,f,e);return}if(r==="reload"){$(o).statusMessage(t.message,t.success,f,e).reloadAfter(i);return}if(r==="redirect"){if(typeof u=="undefined")return;$(o).statusMessage(t.message,t.success,f,e).gotoAfter(u,i);return}if(r==="function"){if(typeof u=="undefined")return;window[u](t);return}}function __trackInvalidField(n,t){n.push({fieldSelector:t,elementSelector:$(t).data("ui-feedback"),text:$(t).data("ui-error")})}function __isValidEmail(n){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n)}function __isValidUrl(n){return/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)/.test(n)}function __notifyBeginOfOperation(n){$(n+" input").attr("disabled","disabled");$(n+" textarea").attr("disabled","disabled");$(n+" button").attr("disabled","disabled");$(n+" a").attr("disabled","disabled")}function __notifyEndOfOperation(n){$(n+" button").removeAttr("disabled");$(n+" a").removeAttr("disabled");$(n+" input").removeAttr("disabled");$(n+" textarea").removeAttr("disabled")}function __inputFileImgLoadError(n){var i=$(n).data("fileid")+"-placeholder",t;$(n).hide();$(i).show();t=$(n).data("fileid")+"-remover";$(t).hide()}function __inputFileInitialize(n){var t=n.find("input[type=file]").first(),s;t.hide();var u="#"+$(t).attr("id"),f=u+"-isdefined",i=u+"-preview",r=u+"-remover",e=u+"-placeholder",o=$(f).val()==="true";$(f).data("orig",o);$(i).data("orig",$(i).attr("src"));__inputFileApplyInternalState(t);o?$(r).show():$(r).hide();$(e).click(function(){t.click()});$(r).click(function(){return t.val(""),t.trigger("change"),$(i).removeAttr("src").removeAttr("title"),$(i).hide(),$(e).show(),$(this).hide(),$(f).val("false"),!1});s=t.data("size-error");t.change(function(n){var t=n.target.files,u,o;if(t&&t[0]){if(u=new FileReader,u.onload=function(n){$(i).attr("src",n.target.result);$(i).show();$(e).hide();$(r).show();$(f).val("true")},t[0].size>2097152){o=s.replace("$",(t[0].size/1048576).toFixed(2)+" MB");Ybq.alert(o,!1);$(r).click();return}u.readAsDataURL(t[0])}});t.click(function(n){return n.stopPropagation()})}function __inputFileApplyInternalState(n){var t="#"+$(n).attr("id"),e=t+"-isdefined",i=t+"-preview",u=t+"-remover",f=t+"-placeholder",r=$(e).val()==="true";r?$(f).hide():$(f).show();$(i).data("fileid",t);r?$(i).show():$(i).hide();$(i).click(function(){n.click()});r?$(u).show():$(u).hide()}function __inputFileResetInternalState(n){var i="#"+n.attr("id")+"-isdefined",t;$(i).val($(i).data("orig"));t="#"+n.attr("id")+"-preview";$(t).attr("src",$(t).data("orig"))}function __inputFileSetDefaultImage(n,t){n.onerror="";n.src=t}var Ybq=Ybq||{};$("input[type=numeric]").on("keyup",function(){var r=parseInt($(this).data("decimals")),t="#"+$(this).data("ref"),i,e;isNaN(r)&&(r=0);var f=1.1.toLocaleString().match(/\d(.*?)\d/)[1],s=$(this).val(),o=s.split(f),h=o[0],u=o[1],c=h.replace(/[^\d]/g,""),n=parseFloat(c);return isNaN(n)?($(this).val(""),$(t).val("0"),!0):(i=n.toLocaleString(),r===0)?($(this).val(i),$(t).val(n),!0):u===undefined?($(this).val(i),$(t).val(n),!0):u==null||u.length===0?($(this).val(i+f),$(t).val(n),!0):(e=u.substr(0,r),$(this).val(i+f+e),$(t).val(n+parseFloat("0."+e)),!0)}).on("blur",function(){var f="#"+$(this).data("ref"),r=parseInt($(this).data("decimals")),u=parseFloat(parseFloat($(f).val()).toFixed(r)),n,t;if(!isNaN(u)){n=parseFloat(parseFloat($(this).attr("min")).toFixed(r));t=parseFloat(parseFloat($(this).attr("max")).toFixed(r));isNaN(n)&&(n=-1e12);isNaN(t)&&(t=1e12);var e=$.trim($(this).val()),o=$(this).attr("required")!==undefined,s=e.length===0&&o,h=$(this).data("error"),i=$(this).data("error-ui");s||u<n||u>t?($(this).addClass("is-invalid"),i!==null&&$(i).html(h)):($(this).removeClass("is-invalid"),i!==null&&$(i).html(""))}});$("input[type=text][data-alphanumeric]").on("keypress",function(n){var t=n.charCode||n.keyCode,i=String.fromCharCode(t),r=/[a-zA-Z0-9-_]/.test(i);return r?!0:(n.preventDefault(),!1)});$("input[data-click-on-enter]").each(function(){$(this).attr("onkeyup","__clickOnEnter(event, '"+$(this).data("click-on-enter")+"')")});$(".ybq-inputfile").each(function(){var n=$(this);__inputFileInitialize(n)});Ybq.postForm=function(n,t,i){var r=$(n),u=new FormData(r[0]);r.find("input[type=file]").each(function(){u.append($(this).attr("name"),$(this)[0].files[0])});__notifyBeginOfOperation(n);$.ajax({cache:!1,url:r.attr("action"),type:r.attr("method"),dataType:"html",data:u,processData:!1,contentType:!1,success:function(i){__notifyEndOfOperation(n);t(i)},error:function(t){__notifyEndOfOperation(n);i(t)}})};Ybq.postFormAuto=function(n,t,i,r){i==null&&(i=!1);r==null&&(r="Something went unexpectedly wrong while posting the content");Ybq.postForm(n,function(u){var f="",e;try{f=JSON.parse(u)}catch(o){Ybq.alert(r,!1,!1,0);return}e=f.success?"All done|":"It didn't work|";Ybq.alert(e+f.message,f.success).then(function(){if(f.success&&Ybq.goto(t),i){var r=$(n);r.find("input[type=text]").val("");r.find("input[type=password]").val("");r.find("input[type=email]").val("");r.find("input[type=url]").val("");r.find("input[type=number]").val("");r.find("textarea").val("")}})})};