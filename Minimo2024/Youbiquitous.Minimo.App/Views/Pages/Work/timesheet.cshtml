@using Youbiquitous.Minimo.App.Common.Extensions
@using Youbiquitous.Minimo.DomainModel.Account
@using Youbiquitous.Minimo.Resources
@using Youbiquitous.Minimo.Settings
@model Youbiquitous.Minimo.ViewModels.Account.WorkViewModel

@section adhoc_css {
	<link rel="stylesheet" href="/css/lib/ybq/ybq-forms.min.css" />
}
@section adhoc_scripts_top {
}
@section adhoc_scripts_bottom {
	<script src="~/js/lib/ybq/ybq-forms.min.js"></script>
}

@{
	var user = User.Logged().ToString();

}
<div class="row card col-10 offset-1 mb-0">
	<div class="row mb-3 p-3 pb-0">
		<div class="col-6">
			<h3 class="italic"><i class="fas fa-user" value=""></i>&nbsp;  @user</h3>
			
		</div>

		<div class="col-6 text-end">
			<button type="button" class="btn btn-success addModal" data-workid="" id="AddModal" data-bs-toggle="modal" data-bs-target="#modal-work">Aggiungi </button>
		</div>
	</div>
	<hr />
	<div>
		<partial name="pv_dailyWork.cshtml" model="Model.Works" />
	</div>
</div>
	

	<!-- Tab content -->
	<div class="modal fade" id="modal-work" aria-hidden="true">
		<div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">
				<div class="modal-header" style="background-color:rgba(0,0,0,.03)">
					<h1 class="modal-title" id="title-work">Timesheet</h1>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body modal-work" id="work-body">
				</div>
			</div>
		</div>
	</div>


<script>
	$(".addModal").click(function (event) {
		var workId = $(this).data("workid");
		var url = "/work/LoadTimesheetModal";
		Ybq.post(url,
			{
				workId: workId
			},
			function (partialview) {

				$("#work-body").html(partialview);
				$("#work-body").show();

			},
			function () {
				$(".work-body").html("@AppMessages.Err_Generic");
			});
	})
</script>








